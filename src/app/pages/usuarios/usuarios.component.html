<input type="text" class="form-control mb-3" placeholder="Escribe aquí para filtrar la columna de usuario..." required (keyup)='updateFilter($event)'>

<!-- [selectionType]="'single'" [selected]="usuario" (select)='onSelect($event)' -->
<ngx-datatable [columns]="columns" [columnMode]="'force'" [headerHeight]="40" [footerHeight]="50" [rowHeight]="'auto'" [rows]='data'
  [messages]="{ emptyMessage: 'No hay usuarios', totalMessage: 'usuarios' }" [limit]="7" [loadingIndicator]="cargando" [scrollbarH]="true">

  <ngx-datatable-column name="Usuario">
    <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
      <span (click)="sort()">
        <strong>{{column.name}}</strong>
      </span>
    </ng-template>
    <ng-template let-value="value" ngx-datatable-cell-template>
      {{value}}
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Nombre">
    <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
      <span (click)="sort()">
        <strong>{{column.name}}</strong>
      </span>
    </ng-template>
    <ng-template let-value="value" ngx-datatable-cell-template>
      {{value}}
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Apellido">
    <ng-template let-column="column" ngx-datatable-header-template>
      <strong>{{column.name}}</strong>
    </ng-template>
    <ng-template let-value="value" ngx-datatable-cell-template>
      {{value}}
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Email">
    <ng-template let-column="column" ngx-datatable-header-template>
      <strong>{{column.name}}</strong>
    </ng-template>
    <ng-template let-value="value" ngx-datatable-cell-template>
      {{value}}
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Rol">
    <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
      <span (click)="sort()">
        <strong>{{column.name}}</strong>
      </span>
    </ng-template>
    <ng-template let-value="value" ngx-datatable-cell-template>
      {{value}}
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Acciones" prop="id">
    <ng-template let-column="column" ngx-datatable-header-template>
      <strong>Acciones</strong>
    </ng-template>
    <ng-template let-value="value" ngx-datatable-cell-template>
      <button (click)="editarUsuario(value)" class="btn btn-success btn-icon-icon waves-effect mr-1 mb-1" placement="top" ngbTooltip="editar"
        container="body">
        <i class="fas fa-pencil-alt"></i>
      </button>
      <button [disabled]="value === usuarioLogueadoId" (click)="eliminarUsuario(value)" class="btn btn-danger btn-icon-icon waves-effect mr-1 mb-1"
        placement="top" ngbTooltip="eliminar" container="body">
        <i class="fas fa-trash-alt"></i>
      </button>
    </ng-template>
  </ngx-datatable-column>

</ngx-datatable>

<div class="card" *ngIf="usuario">
  <div class="card-header">Edición de datos del usuario</div>
  <div class="card-body">
    <form ngNativeValidate (ngSubmit)="f.form.valid && actualizarUsuario()" #f="ngForm">

      <div class="form-group">
        <label for="txtUsuario">Usuario</label>
        <input [(ngModel)]="usuario.usuario" name="usuario" type="text" class="form-control" id="txtUsuario" placeholder="Ingresa tu usuario"
          required>
      </div>

      <div class="form-group">
        <label for="txtNombre">Nombre</label>
        <input [(ngModel)]="usuario.nombre" name="nombre" type="text" class="form-control" id="txtNombre" placeholder="Ingresa tu nombre"
          #nombre="ngModel" [ngClass]="{'is-invalid': nombre?.errors?.required}" required>
        <div class="invalid-feedback" *ngIf="nombre?.errors?.required">Ingresa el nombre</div>
      </div>

      <div class="form-group">
        <label for="txtApellido">Apellido</label>
        <input [(ngModel)]="usuario.apellido" name="apellido" type="text" class="form-control" id="txtApellido" placeholder="Ingresa tu apellido"
          #apellido="ngModel" [ngClass]="{'is-invalid': apellido?.errors?.required}" required>
        <div class="invalid-feedback" *ngIf="apellido?.errors?.required">Ingresa el apellido</div>
      </div>

      <div class="form-group">
        <label for="txtEmail">email</label>
        <input [(ngModel)]="usuario.email" name="email" type="email" class="form-control" id="txtEmail" placeholder="Ingresa tu email"
          #email="ngModel" email [ngClass]="{'is-invalid': email?.errors?.email}">
        <div class="invalid-feedback" *ngIf="email?.errors?.email">email incorrecto</div>
      </div>

      <button type="submit" class="btn btn-primary waves-effect waves-light">
        <i class="fa fa-save" aria-hidden="true"></i>
        Guardar
      </button>

    </form>
    <a class="editar"></a>
  </div>
</div>